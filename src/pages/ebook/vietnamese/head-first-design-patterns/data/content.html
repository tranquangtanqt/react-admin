<p>
  Bạn đã có thời gian của mình ở Objectville Diner, bạn đã thực hiện một phần
  remote control API và trong quá trình đó, bạn đã có một cái nhìn khá tốt về
  cách các lớp và các đối tượng tương tác trong Command Pattern. Bây giờ chúng
  tôi sẽ định nghĩa Command Pattern và tìm hiểu tất cả các chi tiết.
</p>

<p>Hãy bắt đầu với định nghĩa chính thức của nó:</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      loading="lazy"
      width="1335"
      height="337"
      src="https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-1.png"
      alt="Định nghĩa Command Pattern"
      class="wp-image-353"
      srcset="
        https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-1.png         1335w,
        https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-1-768x194.png  768w
      "
      sizes="(max-width: 1335px) 100vw, 1335px"
    />
  </figure>
</div>

<p>
  <strong>
    <em>
      (Command Pattern đóng gói yêu cầu thành đối tượng độc lập, có thể được sử
      dụng để tham số hóa các đối tượng khác với các yêu cầu khác nhau như log,
      queue, và hỗ trợ undo.)
    </em>
  </strong>
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/FA3alR6Ocf0fnzmCwKSCmlIZPi0Z1zV0ZVHGfAnqvOOOH7WYnpFSzn4zJiO8OxgZ2lxZ-X5SGrGARNH37lIrass_sCTa8Y2ig3ZlvMXBtOs2krrjlHeZQEFeTgSM5m7mitKTPT7w"
      alt="Đối tượng Command"
    />
  </figure>
</div>

<p>
  Hãy bước qua điều này. Chúng ta biết rằng một command object đóng gói một yêu
  cầu bằng cách map chúng với một tập hợp các hành động trên một receiver cụ
  thể. Để đạt được điều này, nó đóng gói các hành động và receiver thành một đối
  tượng chỉ một phương thức{' '}
  <strong>execute()</strong>. Khi được gọi, <strong>execute()</strong>{' '} sẽ
  gọi đến phương thức trên receiver để thực hiện hành động. Nhìn từ bên ngoài,
  không có đối tượng nào khác thực sự biết những hành động nào được thực hiện
  trên receiver; chúng chỉ biết rằng nếu chúng gọi phương thức
  <strong>execute()</strong>, request của chúng sẽ được thực hiện.
</p>

<p>
  Chúng ta cũng đã thấy một vài ví dụ về tham số hóa một đối tượng bằng một
  command. Trở lại quán ăn, Waitress được tham số hóa với nhiều Order trong suốt
  cả ngày. Trong <strong>SimpleRemoteControl</strong>, trước tiên, chúng tôi đã
  load vào slot button bằng một “light on” command và sau đó thay thế nó bằng
  một lệnh “garage door open”. Giống như Waitress, remote slot của bạn không
  quan tâm command object nào được đặt vào, miễn là nó implements giao diện
  Command.
</p>
<div
  class="google-auto-placed ap_container"
  style="width: 100%; height: auto; clear: both; text-align: center"
>
  <ins
    data-ad-format="auto"
    class="adsbygoogle adsbygoogle-noablate"
    data-ad-client="ca-pub-1246408068128514"
    data-adsbygoogle-status="done"
    style="
      display: block;
      margin: auto;
      background-color: transparent;
      height: 280px;
    "
  >
    <div
      id="aswift_8_host"
      style="
        border: none;
        height: 280px;
        width: 591px;
        margin: 0px;
        padding: 0px;
        position: relative;
        visibility: visible;
        background-color: transparent;
        display: inline-block;
      "
    ></div>
  </ins>
</div>

<p>
  Những gì chúng ta còn chưa gặp phải là sử dụng các command để cài đặt queues,
  logs và hỗ trợ undo các hành động. Đừng lo lắng, đó là những phần mở rộng khá
  đơn giản của Command Pattern cơ bản và chúng ta sẽ sớm nhận được chúng. Chúng
  ta cũng có thể dễ dàng hỗ trợ những gì mà người ta gọi là Meta Command Pattern
  khi chúng ta có những điều cơ bản. Meta Command Pattern cho phép bạn tạo các
  macro command để bạn có thể thực thi nhiều command cùng một lúc.
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/p-c9J0W-yXGkVY6rjE8LEb63MWlHneeYqKsgcb61GBx_Opb2lSCJVLtKHHWvy7kyTqEzvaE5TA-TvD_dgbXVlDZqWRUhlXyu0HuJdnZC7rpYmtkAlQaQuqIUi6zw1YkPAdZTAThc"
      alt="Thực thi nhiều command cùng lúc"
    />
  </figure>
</div>

<h2 class="wp-block-heading">
  <strong>Định nghĩa Command Pattern: Sơ đồ lớp&nbsp;</strong>
</h2>

<figure class="wp-block-image">
  <img
    decoding="async"
    src="https://lh4.googleusercontent.com/tb6Pvkphah2jyOQjRS3jNBdaC29PwDgT8RRyUJAsGbWD-t4ftrkycK0QQVJZ6w_3SX331ujUCqnV9bUrblkKLRIZGLEArGIjjwLOxIqWZsPgAVY5McieCGazh45pWnLgmonFg_fW"
    alt="Sơ đồ lớp Command Pattern"
  />
</figure>

<h2 class="wp-block-heading">
  <strong>Sử dụng sức mạnh bộ não</strong>
</h2>

<p>
  <strong>
    Làm thế nào để thiết kế Command Pattern hỗ trợ việc tách invoker và
    receiver?
  </strong>
</p>

<p>
  <strong>Sue: </strong>Được rồi, tôi nghĩ rằng bây giờ ta đã có một cái nhìn
  tốt về Command Pattern. Joe thật&nbsp; tuyệt vời, tôi nghĩ chúng ta sẽ trông
  giống như những siêu sao sau khi hoàn thành API remote.
</p>

<p><strong>Mary:</strong> Tôi cũng vậy. Vì vậy, chúng ta bắt đầu từ đâu?</p>

<p>
  <strong>Sue:</strong> Giống như chúng ta đã làm trong{' '}
  <strong>SimpleRemote</strong>, chúng ta cần cung cấp một cách để gán command
  cho các slots. Trong trường hợp của chúng ta, chúng ta có 7 slots, mỗi slots
  có một nút “on” và “off ”. Vì vậy, chúng ta có thể gán các command cho remote
  như thế này:
</p>

<div class="wp-block-syntaxhighlighter-code">
  <div>
    <div id="highlighter_724979" class="syntaxhighlighter java">
      <table border="0" cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td class="gutter">
              <div class="line number1 index0 alt2">1</div>
              <div class="line number2 index1 alt1">2</div>
            </td>
            <td class="code">
              <div class="container">
                <div class="line number1 index0 alt2">
                  <code class="java plain">onCommands[</code>
                  <code class="java value">0</code>
                  <code class="java plain">]&nbsp; = onCommand;</code>
                </div>
                <div class="line number2 index1 alt1">
                  <code class="java plain">offCommands[</code>
                  <code class="java value">0</code>
                  <code class="java plain">] = offCommand; </code>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<p>
  <strong>Mary:</strong> Điều đó có ý nghĩa, ngoại trừ các Light objects. Làm
  thế nào để điều khiển từ xa biết đèn của phòng khách hay đèn của nhà bếp?
</p>

<p>
  <strong>Sue:</strong> Ah, chỉ vậy à, không thành vấn đề! Điều khiển từ xa
  không biết gì ngoài cách gọi <strong>execute()</strong> trên command object
  tương ứng khi nhấn nút.
</p>

<p>
  <strong>Mary:</strong> Vâng, tôi đã hiểu điều đó, nhưng trong quá trình thực
  hiện, làm thế nào để chúng ta đảm bảo đúng đối tượng đang bật và tắt đúng
  thiết bị?
</p>

<p>
  <strong>Sue:</strong> Khi chúng ta tạo các command được load vào điều khiển từ
  xa, chúng ta tạo một <strong>LightCommand</strong> được gắn vào đối tượng
  Living Room Light và một command khác được gắn với đối tượng Kitchen Light.
  Hãy nhớ rằng, receiver bị ràng buộc với command mà nó đóng gói. Vì vậy, tại
  thời điểm nhấn nút, không ai quan tâm đến light của phòng nào, điều đúng sẽ
  xảy ra khi phương thức{' '} <strong>execute() </strong>được gọi.
</p>

<p>
  <strong>Mary:</strong> Tôi nghĩ rằng tôi đã hiểu được nó. Hãy thực hiện chương
  trình remote và tôi nghĩ điều này sẽ rõ ràng hơn!
</p>

<p><strong>Sue: </strong>Nghe hay đấy. Bắt đầu thôi…</p>

<h2 class="wp-block-heading">
  <strong>Gán Command vào slot&nbsp;</strong>
</h2>

<p>
  Vì vậy, chúng ta có một kế hoạch: Chúng ta sẽ gán mỗi slot của điều khiển từ
  xa cho một command. Điều này làm cho remote sẽ điều khiển invoker của chúng
  ta. Khi nhấn nút, phương thức{' '}
  <strong>execute() </strong>sẽ được gọi trên command tương ứng, dẫn đến các
  hành động sẽ được gọi trên receiver (như đèn, quạt trần, stereos).
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/DvvWOmJ5Gc7351iZH2sCVsMYYuac5bSJ8Ct8VLeJVWXKbGlUvPRGm1Y6Mr1yLFO8LQ9b1lXnwcrnS0TMq7tLVZrzDjtVELL7Pf2bDOwMZ4MnEOt7uq4dZCns3XP4bHlm74N3RexG"
      alt="Remote Control"
    />
  </figure>
</div>

<h2 class="wp-block-heading">
  <strong>Implementing Remote Control&nbsp;&nbsp;</strong>
</h2>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh4.googleusercontent.com/EeIPKcgJzT39JjMUBYi5dHXY1xPI4mAWQ4HarPGchbaG2o9pbQRo0zbllms-rFMddwIdkXBf8lvDbsN7INb7X_htMdxaNwVWHn9LqY51Aew4Jphb2ECxy6EAyqfazjIminZfUYxE"
      alt="Lớp Remote Control"
    />
  </figure>
</div>

<h2 class="wp-block-heading">
  <strong>Cài đặt Command Pattern</strong>
</h2>

<p>
  Chà, chúng tôi đã bắt đầu thực hiện <strong>LightOnCommand</strong>{' '} cho
  <strong>SimpleRemoteControl</strong>. Chúng ta có thể đặt code tương tự vào
  đây và mọi thứ hoạt động. Các command “Off” không khác nhau; trong thực tế,
  <strong>LightOffCommand</strong> trông như thế này:
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/QXenyRRu0STa-28Jzj3WLq2As41AGLDe2LN1nZWkxigZuLOGjVrJqXHbbr5-CZqwp3MUzvGx5emaYIrTBGkbtJvQ2_y98bTIQpWrjMpGejAaVPN4HGEljTfzbhGnTuuwogWbBVSY"
      alt="Lớp LightOffCommand"
    />
  </figure>
</div>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh4.googleusercontent.com/UQ2eSwDYKBf0U-36O56QIBmXVyYxIqShoWhTen2P-AT8KzH6_Cqe_o0Tb8R-jKI8zPBL7ommC7-4p5fAp09up4C09iP_0uNGodvRYwNnnvBqp9H24fE8vUcy1JRN_VwH8-oFz_PO"
      alt=""
    />
  </figure>
</div>

<p>
  Hãy thử một cái gì đó thử thách hơn một chút; Làm thế nào về việc viết command
  on và off cho Stereo? Được rồi, off rất dễ, chúng ta chỉ cần liên kết phương
  thức Stereo với phương thức <strong>off()</strong>{' '} trong
  <strong>StereoOffCommand</strong>. On thì&nbsp; phức tạp hơn một chút; hãy nói
  rằng chúng tôi muốn viết một{' '}
  <strong>StereoOnWithCDCommand</strong>…<br />
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh5.googleusercontent.com/5MofvZixRaYp8iyS0NbH26E76l2LR1SjZDwoRphYh6lGMslTpV_9mr9wwTNYriRroiIPxQ6EbNRNwcJenBjr2TNSSqmTu03b8nHXa1lNRjiJJwA8szMNGTzwuhzfUkmIApfnb4eH"
      alt="Lớp StereoOnWithCDCommand"
    />
  </figure>
</div>

<p>
  Không tệ lắm. Hãy xem phần còn lại của các lớp từ nhà cung cấp; bây giờ, bạn
  chắc chắn có thể “hạ gục” phần còn lại của các lớp Command mà chúng ta cần.
</p>

<h2 class="wp-block-heading">
  <strong>Đặt Remote Control đúng nơi của nó</strong>
</h2>

<p>
  Công việc của chúng ta với điều khiển từ xa được thực hiện khá nhiều; tất cả
  những gì chúng ta cần làm là chạy một số thử nghiệm và tập hợp một số tài liệu
  để mô tả API. Home Automatic hay Bust, Inc. chắc chắn sẽ rất ấn tượng, bạn có
  nghĩ vậy không? Chúng tôi đã quản lý để đưa ra một thiết kế sẽ cho phép họ sản
  xuất một cái remote dễ bảo trì và họ sẽ không gặp khó khăn gì trong việc
  thuyết phục các nhà cung cấp viết một số lớp command đơn giản trong tương lai
  vì họ rất thích sự dễ viết.
</p>

<p>Hãy thử nghiệm code này!</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/UDVb4cZ7ve3OlILv_63ao18UELkoU7sme_sWhvRSc3nLXCqmgj67KZnm-29DJ3fvHYJhALM2aG-URSia55saKRKBYMC5UIZC1QVmoqF1nJUps23Fha2KheXetAxEhtpe_DIK-MAN"
      alt="Lớp RemoteLoader"
    />
  </figure>
</div>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh4.googleusercontent.com/_2En1CLU3vr1L2UZHv_8V2gTb3TwKeOQ4LS8twtNMwfqdxG2LE0WPWAQkXcAy-4knHWvYlG4dnGkFzTSmLAcKwIGpyNCPGss-9-LeiB77PyQsLBaeYfknoppS2OsrG-5zjIZmAsb"
      alt="Lớp RemoteLoader và kết quả command line"
    />
  </figure>
</div>

<p style="text-align: left">
  <strong>
    Đợi một chút, cái gì là NoCommand được load trong các slot từ 4 đến 6?&nbsp;
  </strong>
</p>

<p>
  Quan sát tốt! Chúng tôi đã lén đặt thêm một chút dòng lệnh. Trong điều khiển
  từ xa, chúng tôi đã không muốn đặt câu if xem command có được load mỗi lần
  chúng tôi tham chiếu một slot không. Chẳng hạn, trong phương thức
  <strong>onButtonWasPushed()</strong>, chúng ta sẽ cần code như thế này:
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh5.googleusercontent.com/-l9n9LF-Kqmfqtx7l3efQqRCIIim5sG1OF84q0yjjOLd-OVczyfPb15QNk4YqwHB4dSQA50wtMFtTf5vhv52ODKl5_8WdNkqTNi2zRqDQyXdLUX2X53CWh8jHWr_pmiIzD0VFpQY"
      alt="Phương thức onButtonWasPushed() check command là null"
    />
  </figure>
</div>

<p>
  Vì vậy, làm thế nào để chúng ta không cần đặt câu lệnh if? Implements một
  command mà không cần kiểm tra!
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/gJ_0eZHx20GMyNnS9GcG2Zge_zJYE2Pf6SF8Qy-ELCGSNAJ6rSbNCSdmXhr-_KUu47YhXcoZLwoWEaz6kwEX9OmqdlG8sB6SPRGDmjLXbSzWIQVyxUMHQQ3s-PlktmioSKB2qi2C"
      alt="Lớp NoCommand implements Command"
    />
  </figure>
</div>

<p>
  Sau đó, trong constructor <strong>RemoteControl</strong> của bạn, chúng tôi
  gán cho mọi slot một đối tượng <strong>NoCommand </strong>
  theo mặc định và chúng tôi biết rằng chúng tôi sẽ luôn có một command để gọi
  trong mỗi slot.
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh4.googleusercontent.com/KWCPnDvR7Ij2IVL5H_jCEikaUdDtdhWyDoRnun3NF6kjia5h7GGl33vD1ODI43oPThsIDXRUCMNAlwAgLdOQvbBnDcIOuETRRLxPJ0gmjsi_5pR2ihcV9IrbERFfZehhHJJBkbzi"
      alt="Gán NoCommand cho 7 slot của RemoteControl"
    />
  </figure>
</div>

<p>
  Vì vậy, trong output của lần chạy thử của chúng tôi, bạn sẽ thấy vài slot chưa
  được gán command, ngoài đối tượng{' '}
  <strong>NoCommand </strong>mặc định mà chúng tôi đã gán khi chúng tôi tạo
  <strong>RemoteControl</strong>.
</p>

<p>
  Đối tượng <strong>NoCommand</strong> là một ví dụ về null object. Một{' '}
  <strong>Null object</strong> rất hữu ích khi bạn không có một đối tượng có ý
  nghĩa để return và bạn muốn loại bỏ trách nhiệm xử lý kiểm tra null khỏi
  client. Ví dụ, trong Remote control của chúng tôi, chúng tôi không có một đối
  tượng có ý nghĩa để gán cho những slot chưa có thiết bị kết nối vào, vì vậy
  chúng tôi đã cung cấp một đối tượng{' '} <strong>NoCommand</strong> hoạt động
  như một thay thế và không làm gì khi phương thức
  <strong>execute()</strong> của nó được gọi.
</p>

<p>
  Bạn có thể tìm thấy cách sử dụng cho các <strong>Null Objects</strong>{' '}
  kết hợp với nhiều Mẫu thiết kế và đôi khi bạn thậm chí còn thấy{' '}
  <strong>Null Object</strong> được liệt kê dưới dạng là một Mẫu thiết kế cụ
  thể.
</p>

<h2 class="wp-block-heading">
  <strong>Đã đến lúc viết tài liệu…</strong>
</h2>

<p>
  <strong>
    <em> “Thiết kế Remote Control API cho Home Automation or Bust, Inc., </em>
  </strong>
</p>

<p>
  <em>
    Chúng tôi hân hạnh giới thiệu với bạn giao diện lập trình ứng dụng và thiết
    kế sau đây cho Home Automation Remote Control của bạn. Mục tiêu thiết kế
    chính của chúng tôi là giữ cho code điều khiển từ xa càng đơn giản càng tốt
    để nó không yêu cầu thay đổi khi các lớp nhà cung cấp mới được sản xuất.
    Cuối cùng, chúng tôi đã sử dụng Command Pattern để phân tách một cách hợp lý
    lớp RemoteControl khỏi các lớp nhà cung cấp. Chúng tôi tin rằng điều này sẽ
    giảm chi phí sản xuất điều khiển từ xa cũng như giảm đáng kể chi phí bảo trì
    liên tục của bạn.
  </em>
</p>

<p>
  <em> Sơ đồ lớp sau đây cung cấp tổng quan về thiết kế của chúng tôi: </em>
</p>

<figure class="wp-block-image">
  <img
    decoding="async"
    src="https://lh6.googleusercontent.com/O1EbMs_JZnXSTkBBVyVwFPs_SUCg9jd39rwG-rYvZObbO2EpJgGpCzhVNFc4fghI354RoDZNaKm_wIq4w9gyQrmzc69JVkGywcXpLzMMN8n5v8a46RrJxpdjWBEabLwesuTx1wlX"
    alt="Sơ đồ lớp RemoteControl"
  />
</figure>

<p>
  <strong>
    <em>
      Làm tốt lắm; Có vẻ như bạn đã đưa ra một thiết kế tuyệt vời, nhưng bạn có
      quên một điều mà khách hàng yêu cầu không? NÚT UNDO !!!!
    </em>
  </strong>
</p>

<p>
  Rất tiếc! Chúng tôi gần như đã quên… may mắn thay, một khi chúng tôi có các
  lớp Command cơ bản, undo rất dễ dàng để thêm vào. Hãy thêm undo các lệnh của
  chúng tôi và vào điều khiển từ xa…
</p>

<h2 class="wp-block-heading">
  <strong>Chúng ta đang làm gì?</strong>
</h2>

<p>
  Được rồi, chúng ta cần thêm chức năng để hỗ trợ nút undo trên điều khiển từ
  xa. Nó hoạt động như thế này: giả sử Đèn phòng khách tắt và bạn nhấn nút bật
  trên điều khiển từ xa. Rõ ràng là đèn bật sáng. Bây giờ nếu bạn nhấn nút undo
  thì hành động cuối cùng sẽ bị đảo ngược – trong trường hợp này đèn sẽ tắt.
  Trước khi chúng ta đi vào các ví dụ phức tạp hơn, hãy để đối tượng Đèn hoạt
  động với nút undo:
</p>

<p>
  1. Khi các lệnh hỗ trợ undo, chúng có phương thức{' '}
  <strong>undo()</strong> phản chiếu phương thức{' '}
  <strong>execute()</strong>. Bất cứ điều gì <strong>execute()</strong>{' '}
  cuối cùng đã làm, <strong>undo()</strong> sẽ đảo ngược chúng. Vì vậy, trước
  khi chúng ta có thể thêm chức năng undo vào các command của mình, chúng ta cần
  thêm một phương thức <strong>undo()</strong> vào giao diện
  <strong>Command</strong>:
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh5.googleusercontent.com/8CfWtuebtOGoxoAJY7pjxjQE3xW-9TciIA2Am8cpfHRS4WG7GsWARQubaSSa-wtcP8L7lMopjiTLeZQaJx1SZek2Dn6aHD4T8PVAkUDUykyqnDLyBQyyTELM0llaDfFToGirbHaR"
      alt="Thêm phương thức undo() vào Command"
    />
  </figure>
</div>

<p>
  Điều đó đã đủ đơn giản. Bây giờ, hãy đi vào Light command và thực hiện phương
  thức <strong>undo()</strong>.
</p>

<p>
  2. Hãy bắt đầu với <strong>LightOnCommand</strong>: nếu phương thức{' '}
  <strong> <em>execute()</em> </strong>{' '} của&nbsp;
  <strong>LightOnCommand </strong>được gọi, thì phương thức{' '}
  <strong> <em>on()</em> </strong>{' '} được gọi lần cuối. Chúng ta biết rằng{'
  '} <strong> <em>undo()</em> </strong>{' '} cần phải làm ngược lại điều này
  bằng cách gọi phương thức{' '}
  <strong>
    <em>off()</em>
  </strong>
  .
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh4.googleusercontent.com/fCdPxO3lJhSda1JCbqOCs8UJtWQJ99LMdIicTo8esA4pCiYuyUA4lvXWKHuknFGEhmmy_eCfRnNiR8PtV1O3NyOP47mfxgo9C2DsLfHaymyWEVO2U2IDv0Txsr8EeHstsc3h9g9R"
      alt="Chỉnh sửa LightOnCommand với phương thức undo()"
    />
  </figure>
</div>

<p>
  Bây giờ cho <strong>LightOffCommand</strong>. Ở đây, phương thức{' '}
  <strong> <em>undo()</em> </strong>{' '} chỉ cần gọi phương thức{' '}
  <strong> <em>on()</em> </strong>{' '} của object <strong>Light</strong>.
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh5.googleusercontent.com/YzE4HQbY2KhXSUTfka_VDU6BVptJU4K2dDYEVX__10rbzNcHCLdY0_Ci7VmDA7x5nh2nYjQJYKaTgXL9k0KG33Li7hFK32e7pwg3xzG0ev_6TmeiOBs87jubm8q8lpjbY5lQS-T4"
      alt="Chỉnh sửa LightOffCommand với phương thức undo()"
    />
  </figure>
</div>

<p>
  Điều này có thể dễ dàng hơn không? Được rồi, chúng ta chưa hoàn thành; chúng
  ta cần hỗ trợ một chút vào Điều khiển từ xa để xử lý việc theo dõi nút cuối
  cùng được nhấn và nút undo được nhấn.
</p>

<p>
  3. Để thêm hỗ trợ cho nút undo, chúng ta chỉ phải thực hiện một vài thay đổi
  nhỏ cho lớp Remote Control. Ở đây, cách thức mà chúng tôi sẽ thực hiện nó:
  chúng tôi sẽ thêm một biến đối tượng mới để theo dõi command cuối cùng được
  gọi; sau đó, bất cứ khi nào nhấn nút undo, chúng tôi sẽ truy xuất command đó
  và gọi phương thức{' '}
  <strong> <em>undo()</em> </strong>{' '} của nó.
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      loading="lazy"
      width="997"
      height="1051"
      src="https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-2.png"
      alt="Chỉnh sửa lớp RemoteControlWithUndo"
      class="wp-image-354"
      srcset="
        https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-2.png         997w,
        https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-2-768x810.png 768w
      "
      sizes="(max-width: 997px) 100vw, 997px"
    />
  </figure>
</div>

<h2 class="wp-block-heading">
  <strong>Ứng dụng Command Pattern: nút Undo!</strong>
</h2>

<p>Được rồi, hãy test lại một chút để kiểm tra nút undo:</p>

<figure class="wp-block-image">
  <img
    decoding="async"
    loading="lazy"
    width="1757"
    height="908"
    src="https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-3.png"
    alt="Ứng dụng command pattern: nút undo"
    class="wp-image-355"
    srcset="
      https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-3.png          1757w,
      https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-3-768x397.png   768w,
      https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-3-1600x827.png 1600w
    "
    sizes="(max-width: 1757px) 100vw, 1757px"
  />
</figure>

<p>Và đây, kết quả kiểm tra…</p>

<figure class="wp-block-image">
  <img
    decoding="async"
    loading="lazy"
    width="1403"
    height="860"
    src="https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-4.png"
    alt="Kết quả test"
    class="wp-image-356"
    srcset="
      https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-4.png         1403w,
      https://toihocdesignpattern.com/wp-content/uploads/2019/10/image-4-768x471.png  768w
    "
    sizes="(max-width: 1403px) 100vw, 1403px"
  />
</figure>

<h2 class="wp-block-heading">
  <strong>Sử dụng state để implement Undo</strong>
</h2>

<p>
  Được rồi, thực hiện Undo trên lớp Light là hướng dẫn nhưng hơi quá dễ dàng.
  Thông thường, chúng ta cần quản lý một chút trạng thái (state) để thực hiện
  undo. Hãy thử một cái gì đó thú vị hơn một chút, như lớp Quạt trần
  (CeilingFan) từ các lớp nhà cung cấp. Quạt trần cho phép một số tốc độ quạt
  (speed) được đặt cùng với phương thức off.
</p>

<p>Đây là code của <strong>CeilingFan</strong>:</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/MQwp9g_f6SRdbiEG4RyHPFnjaaG6iKZMXLiNpaDWr0VURh8JRRw-0E0E68ufQhGvjVL_IoY_QUU32S1jTK28dR2T68HQEhh6PEJldGd5aHG_NdkPYQXoX8p0RK1Ydr0KVF9Wp01E"
      alt="Lớp CeilingFan cới các phương thức high(), medium(), low(), off(), getSpeed()"
    />
  </figure>
</div>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh5.googleusercontent.com/aFEbfDaF9gtUjTSM8g-kfCUoLZE77id10r4Habl-eaDRXFMD2GcJcyrlujkgDNinOYu2V_u40kCOi68lJ8iS7JtV-B7M2D_MmhPzmRBg9Lk1tQuhtzv0LCOOIcKNGtslybM2HMP_"
      alt="Code lớp CeilingFan"
    />
  </figure>
</div>

<h2 class="wp-block-heading">
  <strong>Thêm Undo vào CeilingFan Command&nbsp;</strong>
</h2>

<p>
  Bây giờ hãy giải quyết việc thêm undo vào các command{' '}
  <strong>CeilingFan </strong>khác nhau. Để làm như vậy, chúng ta cần theo dõi
  cài đặt tốc độ cuối cùng của quạt và, nếu phương thức{' '}
  <strong>undo()</strong> được gọi, hãy khôi phục quạt về tốc độ trước khi tắt.
  Đây là code cho lớp <strong>CeilingFanHighCommand</strong>:
</p>

<figure class="wp-block-image">
  <img
    decoding="async"
    src="https://lh5.googleusercontent.com/EbRaGZn87OFZtUyXAB7SKlce4WWo07X8S97W1zIn678gnczpVmX_H2RQ7pjswcV5viTKV-EqRc5aF4BVRx-AzrLIsZhNFWnSHbrkDq0CY7MJLv9cvhqFGg33WO0wRbjglujQRj7j"
    alt="Lớp CeilingFanHighCommand implements Command"
  />
</figure>

<h2 class="wp-block-heading">
  <strong>Sử dụng sức mạnh bộ não bạn</strong>
</h2>

<p>
  Chúng tôi đã có thêm ba <strong>CellingFan</strong> command:{' '}
  <em>low</em>, <em>medium</em> và <em>off</em> làm thế nào để tất cả chúng được
  thực hiện?
</p>

<h2 class="wp-block-heading">
  <strong>Hãy sẵn sàng để test CellingFan</strong>
</h2>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh4.googleusercontent.com/Kz_C6OUQFojE9YccN-00uFrEo3vIp8E0RLTrnqW3bx1WtyEIJJKdQGhXjCnW7BKpRTVmQmWkYSTL3cqAaXs-w1TBeKaS4k7JBMHIwa-Gy7ZQyi3zYWaH1eyhlcE5AgqUppo8kddJ"
      alt="Remote Control"
    />
  </figure>
</div>

<p>
  Thời gian để load lên điều khiển từ xa của chúng ta với các{' '}
  <strong>CellingFan </strong>command. Chúng tôi sẽ load slot 0 cho quạt với tốc
  độ <em>medium</em> và slot 1 với mức <em>high</em>. Cả hai nút off tương ứng
  sẽ giữ lệnh tắt quạt trần.
</p>

<p>Đây là kịch bản thử nghiệm của chúng tôi:</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh5.googleusercontent.com/a02ctTHn_78m2JLNHv6kWWSMTBIDCNBHzliozSHfzTsE71Z93aOK2fkyBL2emyDPuCPKcwXdsrNOWfVmmwsX9BgIGtTF6CwB62ndxRA07GXC7XuHiDzWhDQNLRtFHsu4d5m8lYba"
      alt="thử nghiệm command pattern RemoteLoader"
    />
  </figure>
</div>

<h2 class="wp-block-heading">
  <strong>Test lớp Celling Fan của chúng ta</strong>
</h2>

<p>
  Được rồi, hãy khởi động remote, load nó bằng các command và nhấn một số nút!
</p>

<figure class="wp-block-image">
  <img
    decoding="async"
    src="https://lh6.googleusercontent.com/SayhoLDiinwWQaSesQpxsWY-xvxCu5lSD3nK2xMBYpzb1ab5o9LHDpkaPZu0NUaFqhTaLoZGeubrt0-yR1M54jb8ydbCYsqBfHjxBJRec-ZkcIILVC7yq-m5h4XUlhjOhJlA8xMO"
    alt="Kết quả chạy chương trình"
  />
</figure>

<h2 class="wp-block-heading">
  <strong>Mọi điều khiển từ xa đều cần một Chế độ Party!</strong>
</h2>

<p>
  Điều gì nếu bạn chỉ cần nhấn một nút và đèn sẽ mờ, stereo và TV được bật và
  play DVD, bồn nước nóng được bật lên?
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/99quNcjKag8VLaqrerzg9jSl_P5MsInFuePcxVDTuDnY2Z8tHJxT2GWAQlb0FBMmuboKecrbINXF8EOafI6Q_xnkljzKkftUvu43l_TT4s-I81NbuZl3viw_H90U9b2qX1QqzyOL"
      alt="Ứng dụng command pattern: Party mode"
    />
  </figure>
</div>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh4.googleusercontent.com/ihQOkjjVS5TW9XWJ9LR22jBH9RnKHWh6Zo5edvoA0HHOMsYcNC3jNIM1Hhc4Vy7TMqZ0pYGa0yvz0TNhwx1me_Kvq7kH6M4kEuUPbxaIoQMQyOekK86YfbYzAboKMBBBzhSlSxgO"
      alt="Lớp MacroCommand implements Command"
    />
  </figure>
</div>

<h2 class="wp-block-heading">
  <strong>Ứng dụng Command Pattern: Macro command</strong>
</h2>

<p>Hãy xem qua cách chúng tôi sử macro command:</p>

<p>
  1. Đầu tiên chúng ta tạo tập hợp các command mà chúng ta muốn đưa vào macro:
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh5.googleusercontent.com/wD_ST9za0BSj75-kEHap3tpLVgiwi1hipT0zJ64UTadPoNIMOxF9nSwgXDbueA3VpUGXpBtSeudrRoAsGWTnVQ7SmZfBbjzD_LCs3_M2yFo5rjFFMr8gROldvZ9YZqWVdnx82ngQ"
      alt="Cài đặt lớp MacroCommand"
    />
  </figure>
</div>

<p>
  <strong>
    Đến lượt bạn: Chúng ta cũng sẽ cần các command cho các nút off, viết code để
    tạo các nút ở đây
  </strong>
</p>

<p>
  <strong>Đáp án:</strong>
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/biFSiA1e5M5pZMoSeUZbsIR28hZ3f-DHWq0byy7kdbsK6ABvjk6NOBLLIE-PdpzxFSBGt3OoG00zYSc5fVHxRzK-H6uSKFR80XrJ_a2ktfV7kdmW20jzfKkB6aZ7goGVtUc7NgaY"
      alt="nút off cho MacroCommand"
    />
  </figure>
</div>

<p>
  2. Tiếp theo, chúng ta tạo hai mảng, một cho các lệnh{' '}
  <strong>On </strong>và một cho <strong>Off </strong>và load chúng với các
  command tương ứng:
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/psyMBGNk6Ux3UxqUfY9Vflb2-fQFRU0zDg8pXziOKCFWS_QjifhLVfELe-nhvjCQgthnSQSyCrHMFchTGyYhgd-xGyQRQzkvV174Cl4xbW0iyBahmRc1ilmB9CoWhUtaVKKQoY0f"
      alt="Tạo 2 list lưu trữ trạng thái on và off của MacroCommand"
    />
  </figure>
</div>

<p>
  3. Sau đó, chúng ta gán <strong>MacroCommand</strong> cho một button như chúng
  ta đã làm:
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh3.googleusercontent.com/z0ktyt3SC-5dS8xEfTpvOPXmaYYXmrGnKDiWVwRucYFvwWZOaYXCGVzKuuKtrXhBohpLuy28BXjIKziT7IqzfUZz5O2DLGY2ObR4MSijpFId_udbFgsNIGgwy6CXPeXeurDaRbKN"
      alt="gán MacroCommand vào slot"
    />
  </figure>
</div>

<p>4. Cuối cùng, chúng ta chỉ cần nhấn một số nút và xem điều này hoạt động.</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh3.googleusercontent.com/mSGkU1GlULn0ZBxcU72VFZ6xQww6vZ4DgT7qZoCYyU9MuyoNSQ6EGkz-DM0kIH0JrK8Y2pHz59HkfLKXHNaPJpLZ8xlQ7M1m-lj7Bs1v2nWXpBMGBUuFBHraDXKkCHYLyR_qIWe5"
      alt="Kết quả chạy chương trình"
    />
  </figure>
</div>

<p>
  <strong>
    Bài tập: Điều duy nhất MacroCommand của chúng ta thiếu là chức năng undo.
    Khi nhấn nút undo sau một macro command, tất cả các command được gọi trong
    macro phải undo các hành động trước đó của chúng. Đây là code cho
    MacroCommand; tiếp tục và thực hiện phương thức undo():
  </strong>
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/oFMggmR5FxCP5c9yamaVRCDu8yiswVKy4wdHaAbNyqCR4d7HV6TTUJvFF6V9zbeopNqB_3R-MCT_nkdK7R_sIG_Xog_0AXA1G_YY57YuoJem7S9pfRu_L1v2FASPBDa9opt1wU0U"
      alt="Undo cho MacroCommand"
    />
  </figure>
</div>

<p>
  <strong>Đáp án:</strong>
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh6.googleusercontent.com/tWDPtfernVU_gp7hgR9zTbHo4zDU8fda42Q7Hlqkm1bXmhR2qRuffOShKkF2BBFvl_ers4UJg-2GiPCM0QA6rblQPEvmPpu6gbeXiE6DLEbCzJqMWTjpalCrr6rU0Nc-0rJjX-zW"
      alt="Đáp án undo cho MacroCommand"
    />
  </figure>
</div>

<h2 class="wp-block-heading">
  <strong>Không có câu hỏi ngớ ngẩn</strong>
</h2>

<p>
  <strong>Hỏi: </strong>Tôi luôn cần một receiver phải không? Tại sao command
  object không thể cài đặt phần chi tiết của{' '}
  <strong> <em>execute()</em> </strong>{' '} method?
</p>

<p>
  <strong>Trả lời: </strong>Nói chung, chúng tôi cố gắng cho các command
  objects, chỉ cần implement một hành động trên receiver; tuy nhiên, có rất
  nhiều ví dụ về các đối tượng command “thông minh” thực hiện hầu hết, nếu không
  phải là tất cả, logic cần thiết để thực hiện một yêu cầu. Chắc chắn bạn có thể
  làm điều này; chỉ cần lưu ý rằng bạn sẽ không còn mức độ tách rời giữa invoker
  và receiver, bạn cũng không thể tham số hóa các command của bạn với receiver.
</p>

<p>
  <strong>Hỏi:</strong> Làm thế nào tôi có thể thực hiện một lịch sử hoạt động
  undo? Nói cách khác, tôi muốn có thể nhấn nút undo nhiều lần.
</p>

<p>
  <strong>Trả lời: </strong>Câu hỏi tuyệt vời! Nó thực sự rất dễ dàng; thay vì
  chỉ giữ một tham chiếu đến Command cuối cùng được thực thi, bạn giữ một ngăn
  xếp Stack các command trước đó. Sau đó, bất cứ khi nào undo được nhấn, invoker
  của bạn sẽ Pop (lấy) command đầu tiên ra khỏi stack và gọi phương thức
  <strong>undo() </strong>của command đó.
</p>

<p>
  <strong>Hỏi: </strong>Tôi có thể thực hiện “Party Mode” như một command bằng
  cách tạo <strong>PartyCommand</strong> và đặt lệnh gọi đến các phương thức
  <strong>execute() </strong>của Command khác trong phương thức
  <strong>execute()</strong> của{' '} <strong>PartyCommand</strong> không?
</p>

<p>
  <strong>Trả lời: </strong>Bạn có thể; tuy nhiên, chúng sẽ trở thành “code
  cứng” trong <strong>PartyCommand</strong>. Đó là một rắc rối lớn? Với
  <strong>MacroCommand</strong>, bạn có thể quyết định các{' '}
  <strong>Command </strong>nào bạn muốn vào{' '} <strong>PartyCommand</strong>,
  do đó bạn có thể linh hoạt hơn khi sử dụng <strong>MacroCommand</strong>. Nhìn
  chung,{' '} <strong>MacroCommand</strong> là một giải pháp an toàn hơn và yêu
  cầu ít code mới hơn.
</p>

<h2 class="wp-block-heading">
  <strong>Ứng dụng Command Pattern: Hàng đợi các request</strong>
</h2>

<p>
  Command cho chúng ta một cách để đóng gói một phần xử lý (một receiver và một
  tập hợp các hành động) và chuyển nó đi như một đối tượng first-class. Bây giờ,
  việc xử lí có thể được invoked sau đó khi một số ứng dụng client tạo đối
  Command. Trong thực tế, nó thậm chí có thể được gọi bởi một thread khác. Chúng
  ta có thể lấy kịch bản này và áp dụng nó cho nhiều ứng dụng hữu ích như
  schedulers (đặt lịch chạy), thread pools và&nbsp; job queues.
</p>

<p>
  Tưởng tượng một hàng đợi công việc: bạn thêm các command vào hàng đợi ở một
  đầu và ở đầu kia là một nhóm các thread. Các thread sẽ chạy đoạn script sau:
  loại bỏ một command khỏi hàng đợi, gọi phương thức{' '}
  <strong>execute()</strong> của nó, đợi cuộc gọi kết thúc, sau đó loại bỏ đối
  tượng command đó và truy xuất một command mới.
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh5.googleusercontent.com/Pqj8EyCEJasplqiq4sYtKqL2pBUPaI11B8m2FNNg4k0mgD7FS7KgkPzZ4NI5fihx14BOJ6060WpahRvQ7yjQ08BHsZtLeTJIZiq5-Y51m-5NFGXXfF7mC807C6zNEgHX_F1GAvpN"
      alt="Hàng đợi (queue) của command pattern"
    />
  </figure>
</div>

<p>
  Lưu ý rằng các lớp hàng đợi công việc được tách rời hoàn toàn khỏi các đối
  tượng đang thực hiện xử lí. Một phút một Subject có thể tính toán một tính
  toán, và phút tiếp theo nó có thể lấy một cái gì đó từ network… Các đối tượng
  hàng đợi công việc không quan tâm; chúng chỉ lấy các command và gọi
  <strong>execute().</strong> Tương tự, miễn là bạn đặt các đối tượng vào hàng
  đợi thực hiện Command Pattern, phương thức <strong>execute()</strong> của bạn
  sẽ được gọi khi có một thread.
</p>

<h2 class="wp-block-heading">
  <strong>Sử dụng sức mạnh bộ não</strong>
</h2>

<p>
  Làm thế nào một web server có thể tận dụng dụng một hàng đợi như vậy? Bạn có
  thể nghĩ đến một ứng dụng nào khác không?
</p>

<h2 class="wp-block-heading">
  <strong>Ứng dụng Command Pattern: logging request</strong>
</h2>

<p>
  Ngữ nghĩa của một số ứng dụng yêu cầu chúng tôi log tất cả các hành động và có
  thể phục hồi sau khi gặp sự cố bằng cách khôi phục các hành động đó. Mẫu
  Command có thể hỗ trợ các ngữ nghĩa này với việc bổ sung hai phương thức:
  <strong>store() </strong>và <strong>load()</strong>. Trong Java, chúng ta có
  thể sử dụng object serialization (tuần tự hóa) để thực hiện các phương thức
  này, nhưng hãy cẩn thận khi sử dụng serialization để bảo trì.
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh3.googleusercontent.com/vY4XHSUcsBDZXAQUVhKuCvRTI7-RFX9yagwEwAl0F2oOBAfihZ33uzcC0ijetJyo4_iIfEsx9xIK--xL3yC_qEuJRO_hV82voh7sAbaMJCImNVv4DPYn0mCUTLdyzIZssVTFnEiz"
      alt="store() và load() cho interface Command"
    />
  </figure>
</div>

<p>
  Cái này hoạt động ra sao? Khi chúng tôi thực thi các command, chúng tôi lưu
  trữ (store) một lịch sử của chúng trên đĩa. Khi xảy ra sự cố, chúng ta load
  lại các đối tượng command và gọi các phương thức{' '}
  <strong>execute() </strong>của chúng theo nhóm và theo thứ tự.
</p>

<p>
  Bây giờ, loại log này sẽ không có ý nghĩa đối với một remote control; tuy
  nhiên, có nhiều ứng dụng gọi các hành động trên các cấu trúc dữ liệu lớn có
  thể được lưu nhanh chóng mỗi khi có thay đổi. Bằng cách sử dụng log, chúng tôi
  có thể lưu tất cả các hoạt động kể từ thời điểm kiểm tra cuối cùng (last check
  point) và nếu có lỗi hệ thống, hãy áp dụng các hoạt động đó cho checkpoint của
  chúng tôi.{' '}
</p>

<p>
  Lấy ví dụ, một ứng dụng bảng tính (spreadsheet, như excel): chúng tôi có thể
  muốn thực hiện khôi phục lỗi của mình bằng cách ghi log các hành động trên
  bảng tính thay vì viết một bản sao của bảng tính vào đĩa mỗi khi có thay đổi.
  Trong các ứng dụng nâng cao hơn, các kỹ thuật này có thể được mở rộng để áp
  dụng cho các tập hợp hoạt động theo transactional để tất cả các hoạt động sẽ
  hoặc hoàn thành hoặc không có thao tác nào thực hiện (tìm hiểu{' '}
  <a
    rel="noreferrer noopener"
    aria-label="transaction database (mở trong tab mới)"
    href="https://vi.wikipedia.org/wiki/Giao_d%E1%BB%8Bch_c%C6%A1_s%E1%BB%9F_d%E1%BB%AF_li%E1%BB%87u"
    target="_blank"
  >
    transaction database
  </a>
  ).
</p>

<div class="wp-block-image">
  <figure class="aligncenter">
    <img
      decoding="async"
      src="https://lh5.googleusercontent.com/Zna7gJB39ariagzLiGaZchhZOwZRl9ZwH1FBakXeXMsZ1i_jwRfWXGaSpKH2JRHPE3FDnssGO5LbrLpdKuHG4fioHX_LPPZOb_MCVMyfOzZvc9NpTqywytmHWXeR0vF1W5LXlwMk"
      alt="Thực hiện restore khi hệ thống gặp sự cố với command pattern"
    />
  </figure>
</div>

<h2 class="wp-block-heading">
  <strong>Tóm tắt</strong>
</h2>

<ul>
  <li>
    Command Pattern tách riêng một đối tượng, và đưa ra yêu cầu tới đối tượng
    biết cách thực hiện nó.
  </li>
  <li>
    Một đối tượng <strong>Command </strong>nằm ở trung tâm của việc tách rời này
    và đóng gói một receiver bằng một hành động (hoặc tập hợp các hành động).
  </li>
  <li>
    Một invoker đưa ra yêu cầu của một đối tượng{' '}
    <strong>Command </strong>bằng cách gọi phương thức{' '}
    <strong>execute()</strong> của nó, gọi các hành động đó trên receiver.
  </li>
  <li>
    <strong>Invoker </strong>có thể được tham số hóa bằng các{' '}
    <strong>Command</strong>, thậm chí là gán động khi chạy.
  </li>
  <li>
    Command có thể hỗ trợ undo bằng cách thực hiện một phương thức undo khôi
    phục đối tượng về trạng thái trước đó trước khi phương thức{' '}
    <strong>execute()</strong> được gọi lần cuối.
  </li>
  <li>
    <strong>Macro Commands</strong> là một phần mở rộng đơn giản của Command cho
    phép nhiều command được gọi. Tương tự,{' '}
    <strong>Macro Commands</strong> có thể dễ dàng hỗ trợ{' '}
    <strong>undo()</strong>.
  </li>
  <li>
    Trong thực tế, không có gì lạ khi các đối tượng “smart” Command có thể tự
    thực hiện yêu cầu thay vì ủy thác cho receiver.
  </li>
  <li>
    <strong>Command </strong>cũng có thể được sử dụng để thực hiện các hệ
    thống{' '}
    <strong>
      <em>logging </em>
    </strong>
    và{' '}
    <strong>
      <em>transactional</em>
    </strong>
    .
  </li>
</ul>

<p>
  Đây là link đính kèm bản gốc của quyển sách:&nbsp;
  <a
    href="https://drive.google.com/file/d/14lMY_ot5FHgX7aOR9YiVjR2iD1DdJ6hZ/view?usp=sharing"
    target="_blank"
    rel="noreferrer noopener"
    aria-label=" (mở trong tab mới)"
  >
    Head First Design Patterns
  </a>
  .<br />
  Đây là link đính kèm sourcecode của sách:&nbsp;
  <a
    rel="noreferrer noopener"
    href="https://resources.oreilly.com/examples/9780596007126"
    target="_blank"
  >
    Tải SourceCode
  </a>
  .{' '}
</p>
